<!-- templates/sidebar.html -->
{% load static %}
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>{% block title %}Dashboard â€“ MIMS{% endblock %}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="{% static 'style/style.css' %}" />
  {% block extra_css %}{% endblock %}
</head>
<body>
  <!-- Topbar -->
  <div class="topbar">
    <div class="hello">
      <img src="{% static 'mimsLogo.png' %}" alt="">
      <div>Hello {{ username }}</div>
    </div>
    <!-- <a class="logout" href="{% url 'authen:logout' %}">Logout</a> -->
    <button class="logout" id="logoutBtn"
          data-href="{% url 'authen:logout' %}">Logout</button>
  </div>

  <div class="wrap">
    <!-- Sidebar -->
    <aside id="sidebar" class="sidebar">
      <div class="side-header">
        <div class="side-title">Menu</div>
        <button id="collapseBtn" class="collapse-btn">&lt;</button>
      </div>
      <a href="/dashboard/" class="nav-item {% if request.path == '/dashboard/' %}active{% endif %}">
        <span class="nav-icon">ğŸ </span>
        <span class="nav-text">Dashboard</span>
      </a>
      <a href="{% url 'log:page' %}" class="nav-item {% if request.path|slice:':5' == '/log/' %}active{% endif %}">
        <span class="nav-icon">â‰¡</span><span class="nav-text">Log</span>
        </a>
      <!-- <a href="/dashboard/settings/" class="nav-item {% if '/settings/' in request.path %}active{% endif %}">
        <span class="nav-icon">âš™ï¸</span>
        <span class="nav-text">Settings</span>
      </a> -->
      <div style="margin-top:auto;"></div>
    </aside>

    <!-- Main Content Area -->
    <main id="main" class="main">
      {% block content %}
      {% endblock %}
    </main>
  </div>

  <!-- Sidebar collapse script -->
  <script>
    const sidebar = document.getElementById("sidebar");
    document.getElementById("collapseBtn").addEventListener("click", () => {
      const mini = sidebar.classList.toggle("mini");
      document.getElementById("collapseBtn").textContent = mini ? ">" : "<";
    });

    // Logout
    const logoutBtn = document.getElementById("logoutBtn");
    logoutBtn.addEventListener("click", (e) => {
        e.preventDefault();
        window.location.href = logoutBtn.dataset.href;
    });
  </script>

  {% block extra_js %}{% endblock %}
</body>
</html>